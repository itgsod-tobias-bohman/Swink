// Generated by CoffeeScript 1.9.0
(function() {
  var getLinks, removeLink, renderLinks;

  $(function() {
    console.log('Ready');
    getLinks();
    return $('body').on('submit', '.remover', function() {
      return removeLink($(this), event);
    });
  });

  removeLink = function(form, event) {
    return $.ajax({
      url: form.attr('action'),
      method: form.attr('method'),
      data: form.serialize(),
      success: function() {
        var n;
        form.parent().parent().remove();
        return n = noty({
          text: 'Link removed!'
        });
      }
    }, event.preventDefault());
  };

  getLinks = function() {
    return $.ajax({
      url: '/links.json',
      dataType: 'json',
      error: function(jgXHR, textStatus, errorThrown) {
        return console.log("AJAX ERROR: " + textStatus + ", " + errorThrown);
      },
      success: renderLinks
    });
  };

  renderLinks = function(links) {
    var source, template;
    source = $('#links-template').html();
    template = Handlebars.compile(source);
    return $('body').append(template(links));
  };

}).call(this);
